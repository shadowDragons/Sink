# Sink API

Writing API documentation manually can be very laborious, and we will automatically generate documents after the official release of [Nitro's OpenAPI](https://nitro.unjs.io/config#openapi).

This place provides an example of creating a short link API. Other APIs are currently available for viewing through browser developer tools.

## API Reference

### Create Short Link

```http
  POST /api/link/create
```

| Header          | Description        |
| :-------------- | :----------------- |
| `authorization` | `Bearer SinkCool`  |
| `content-type`  | `application/json` |

#### Example

**With custom slug:**

```http
  POST /api/link/create
  HEADER authorization: Bearer SinkCool
  HEADER content-type: application/json
  BODY  {
          "url": "https://github.com/ccbikai/Sink/issues/14",
          "slug": "issue14"
        }
```

**Auto-generate slug (recommended):**

```http
  POST /api/link/create
  HEADER authorization: Bearer SinkCool
  HEADER content-type: application/json
  BODY  {
          "url": "https://github.com/ccbikai/Sink/issues/14"
        }
```

The BODY data must be JSON.

```http
  RESPONSE 201
  BODY  {
          "link": {
            "id": "xpqhaurv5q",
            "url": "https://github.com/ccbikai/Sink/issues/14",
            "slug": "issue14",
            "createdAt": 1718119809,
            "updatedAt": 1718119809
          },
          "shortLink": "https://your-domain.com/issue14"
        }
```

| Parameter     | Type        | Description                                                                                                                               |
| :------------ | :---------- | :---------------------------------------------------------------------------------------------------------------------------------------- |
| `id`          | `string`    | This is automatically generated by Sink                                                                                                   |
| `url`         | `string`    | This is confirmation of the submitted URL and is required.                                                                                |
| `slug`        | `string`    | **Optional.** Custom slug for the short link. If not provided, a random slug will be automatically generated and guaranteed to be unique. |
| `title`       | `string`    | **Optional.** Title for the link                                                                                                          |
| `description` | `string`    | **Optional.** Description for the link                                                                                                    |
| `comment`     | `string`    | **Optional.** Internal comment/note for the link                                                                                          |
| `expiration`  | `timestamp` | **Optional.** UNIX timestamp when the link expires                                                                                        |
| `createdAt`   | `timestamp` | This is automatically generated with a UNIX Timestamp.                                                                                    |
| `updatedAt`   | `timestamp` | This is automatically generated with a UNIX Timestamp.                                                                                    |

#### Smart Slug Generation

- **Custom slug**: If you provide a `slug`, the system will check if it's available. Returns `409 Conflict` if already taken or `400 Bad Request` if it's a reserved slug.
- **Auto-generated slug**: If you don't provide a `slug`, the system will automatically generate a unique random slug that's guaranteed not to conflict with existing links or reserved slugs.
- **Reserved slugs**: Some slugs like `dashboard` are reserved and cannot be used.

#### Error Responses

- `400 Bad Request`: Invalid input data or reserved slug
- `401 Unauthorized`: Missing or invalid authorization token
- `409 Conflict`: Custom slug already exists
- `500 Internal Server Error`: Unable to generate unique slug (rare)
